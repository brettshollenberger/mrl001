<div class="row vendorSection area" ui-if="vendor">
    <div class="span8 offset1">
        <h1 ng-show="!vendor.logo">{{vendor.name}}</h1>
        <a ng-show="vendor.website" href="{{vendor.website}}">
            <img class="img-rounded img-large vendor-logo" ng-src="{{vendor.logo.original}}" ng-show="vendor.logo.original" title="{{vendor.name}}" />
        </a>
        <img class="img-rounded img-large vendor-logo" ng-src="{{vendor.logo.original}}" ng-show="vendor.logo.original && !vendor.website" title="{{vendor.name}}" />
        
    </div>
    <div class="span2">
        <img class="pull-right poweredby" src="img/powered_by.png" />
    </div>
</div>

<div class="row area" ui-if="!didQuote && !vendor_id">

    <div class="span8 offset1">
            
        <label>Choose your vendor</label>
        <select ui-if="!didQuote && !vendor_id" id="vendorName" ng-model="quote.vendorId" ng-options="value._id as value.name for (key, value) in vendors" ></select>
        
    </div>
    
    <div class="span2">
        <img class="pull-right poweredby" src="img/powered_by.png" />
    </div>
    
</div>


<div class="row area-dark area">
    <div class="span10 offset1">
        <div class="row">
            <div class="span10">
                <h3>Equipment Information</h3>
            </div>
        </div>
    
        <div class="row area-equiptment area">
            <div class="span5">
                <label>Total Cost</label>
                <span class="dollarSign">$</span><input type="text" class="input-xlarge" placeholder="" ng-model="quoteCost" ng-disabled="!canEdit">
                <p class="alert alert-info" ng-hide="!didQuote || !canEdit">You can change the amount and click re-calculate quote.</p>
                
                <a  class="btn btn-primary" 
                    id="re-generateQuote"
                    analytics-on="click" 
                    analytics-event="ReCalcuate Quote"
                    analytics-category="Tools : Quoter" 
                    ng-disabled="" 
                    ng-click="generateQuote()" 
                    ui-if="didQuote && canEdit">{{buttonText}}</a>
                    
                <p ui-if="didQuote && canEdit">Or, get a <a href="#/tools/quoter">new quote</a></p>
            
            </div>
            <div class="span5">
                <label>Description of Equipment</label>
                <textarea type="text" class="large" ng-model="quote.description" ng-disabled="!canEdit"></textarea>
            </div>
        </div>
    </div>
</div>

<div class="row area" ng-hide="didQuote">   
    <div class="span10 offset1">
        <div class="row">
            <div class="span10">
                <h3>Company Info</h3>
            </div>
        </div>
    
        <div class="row area">
            <div class="span5">
                <label>Company Name</label>
                <input type="text" class="input-xlarge" placeholder="" ng-model="quote.company.fullLegalBusineessName">
            </div>
            <div class="span5">
                <label>Address 1</label>
                <input type="text" class="input-xlarge" placeholder="" ng-model="quote.company.businessAddress.address1">
                
                <label>Address 2</label>
                <input type="text" class="input-xlarge" placeholder="" ng-model="quote.company.businessAddress.address2">
                
                <label>City</label>
                <input type="text" placeholder="" class="input-xlarge" ng-model="quote.company.businessAddress.city">
                
                <label>State</label>
                <select class="input-medium" ng-model="quote.company.businessAddress.state" ng-options="state.abbreviation as state.name for state in states"></select>
        
                <label>Zip</label>
                <input type="text" placeholder="" class="input-medium" ng-model="quote.company.businessAddress.zip">
            </div>
        </div>
    </div>
</div>

<div class="row area area-dark" ng-hide="didQuote">   
    <div class="span10 offset1">
        <div class="row">
            <div class="span10">
                <h3>Contact Info</h3>
            </div>
        </div>
    
        <div class="row area">
            <div class="span5">
                <label>Contact Name</label>
                <input type="text" class="input-xlarge" placeholder="" ng-model="quote.company.contactPerson.name">
            </div>
            <div class="span5">
                <label>Email</label>
                <input type="text" class="input-xlarge" placeholder="" ng-model="quote.company.contactPerson.email">
                
                <label>Phone</label>
                <input type="text" class="input-xlarge" placeholder="" ng-model="quote.company.contactPerson.phone">
            
                <p>Preferred contact method</p>
                <a ng-click="quote.company.contactPerson.contactMethod = 'email'" class="btn contact-method" ng-class="{active: quote.company.contactPerson.contactMethod == 'email'}">Email</a>
                <a ng-click="quote.company.contactPerson.contactMethod = 'phone'" class="btn contact-method" ng-class="{active: quote.company.contactPerson.contactMethod == 'phone'}">Phone</a>
            </div>
        </div>
    </div>
</div>


<div class="row" ng-show="didQuote">

    <div class="span10 offset1">
        
        <h3>Leasing Options</h3>
        
        <div ng-repeat="program in filteredPrograms">
            <h4>{{program.displayName || program.name}}</h4>
            <table class="table" ng-repeat="buyOutOption in program.rateSheet.buyoutOptions">
                <thead>
                    <th class="span3">{{buyOutOption.name}}</th>
                    <th class="span1" ng-repeat="term in buyOutOption.terms">{{term.length}} {{program.rateSheet.termPeriod}}</th>
                </thead>
                <tbody>
                    <tr>
                        <td>${{quote.totalCost | number:2}}</td>
                        <td ng-repeat="rate in buyOutOption.costs[0].rates">
                           
                            ${{rate.rate *  quote.totalCost | number:2}}<br/>
                            <a ng-click="chooseRate(option.name, program.rateSheet.termLength[$index].length, program.rateSheet.termPeriod, rate.periodPayment)"  class="btn btn-primary btn-select-term">Select</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!--
<pre>
        {{filteredPrograms | json}}
        </pre>
-->
        
        <div ng-repeat="program in quote.programs">
            <!--
           <h4>{{program.displayName || program.name}}</h4>
            
<table class="table">    
                <thead>
                    <tr>
                        <th class="span3">End of Lease Options</th>
                        <th class="span1" ng-repeat="term in program.rateSheet.buyoutOptions.termLength">{{term.length}} {{program.rateSheet.termPeriod}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="option in program.rateSheet.buyoutOptions">
                        <td>{{option.name}}</td>
                        <td ng-repeat="rate in option.rates">
                            {{rate.periodPayment = rate.rate * quote.totalCost | number:2}}
                            <br />
                            <a ng-click="chooseRate(option.name, program.rateSheet.termLength[$index].length, program.rateSheet.termPeriod, rate.periodPayment)"  class="btn btn-primary btn-select-term">Select</a>
                        </td>
                    </tr>
                </tbody>
            </table>
-->
        </div>

    </div>
    
</div>
<div class="row" ng-show="vendor.legalTerms">        
    <div class="span10 offset1">
        <br /><br />
        <h3>Terms</h3>
        <div id="legalTerms">{{vendor.legalTerms}}</div>
        <br />
        <p>Quotes expire after 30 (Thirty) days.</p>
    </div>
</div>

    
<div class="row" ui-if="canEdit && !didQuote">
        
    <div class="span10 offset1 text-center">
        
        <hr />
        <button type="submit" class="btn btn-primary btn-mega" id="generateQuote" ng-disabled="!quote.vendorId" ng-click="generateQuote()">{{buttonText}}</button>
        <p ng-show="didQuote">Or, get a <a href="#/tools/quoter">new quote</a></p>
    </div>

</div>

<div class="row" ng-show="didQuote">        
    <div class="span10 offset1">
    
    <h3>Share</h3>

    <label>Send this link to share this quote!</label>
    <input type="text" id="permalink" value="{{permalink}}" class="input-xxlarge" />
    
    <br />
    <button class="btn btn-primary"
        analytics-on="click" 
        analytics-event="Download quote as PDF"
        analytics-category="Tools : Quoter"  
        ng-click="download()">Save as PDF<i ng-show="downloading" class="icon icon-spinner icon-spin"></i></button>
    
</div>

